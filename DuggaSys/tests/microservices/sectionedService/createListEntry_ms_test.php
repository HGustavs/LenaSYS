<?php

include "../../../../Shared/test.php";

error_reporting(E_ALL);

$testsData = array(
    'createListEntry - Creating a code entry' => array(
        'expected-output' => '{"entries":[{"entryname":"JavaScript-Code:","pos":"1","kind":"1","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":"2015-01-30 15:30:00","relativedeadline":null,"qrelease":"2015-01-01 00:00:00","comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 1","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 2","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 3","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 4","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 5","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 6","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 7","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 8","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 9","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"JS-TEST template 10","pos":"1","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"HTML-Code:","pos":"2","kind":"1","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":"2015-01-30 15:30:00","relativedeadline":null,"qrelease":"2015-01-01 00:00:00","comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 1","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 2","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 3","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 4","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 5","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 6","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 7","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 8","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 9","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Html-test template 10","pos":"2","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-CODE:","pos":"3","kind":"1","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":"2015-01-30 15:30:00","relativedeadline":null,"qrelease":"2015-01-01 00:00:00","comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 1","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 2","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 3","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 4","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 5","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 6","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 7","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 8","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 9","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"SQL-TEST template 10","pos":"3","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-CODE:","pos":"4","kind":"1","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":"2015-01-30 15:30:00","relativedeadline":null,"qrelease":"2015-01-01 00:00:00","comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 1","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 2","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 3","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 4","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 5","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 6","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 7","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 8","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 9","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"PHP-TEST template 10","pos":"4","kind":"2","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"Other:","pos":"5","kind":"1","moment":null,"visible":"1","highscoremode":"0","gradesys":null,"code_id":null,"deadline":"2015-01-30 15:30:00","relativedeadline":null,"qrelease":"2015-01-01 00:00:00","comments":null,"qstart":null,"grptype":null,"tabs":null,"feedbackenabled":"0","feedbackquestion":null},{"entryname":"New Code","pos":"8","kind":"2","moment":null,"visible":"0","highscoremode":"0","gradesys":"0","code_id":null,"deadline":null,"relativedeadline":null,"qrelease":null,"comments":"undefined","qstart":null,"grptype":null,"tabs":"0","feedbackenabled":"0","feedbackquestion":null}],"debug":"NONE!","coursename":"Testing-Course","coursevers":"1337","coursecode":"G1337","courseid":"1885","codeexamples":[{"cid":"","examplename":"","runlink":"","cversion":""},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"HTML-TEST1.html","runlink":"HTML-TEST1.html","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"JS-TEST1.js","runlink":"JS-TEST1.js","cversion":"1337"},{"cid":"1885","examplename":"New Code","runlink":null,"cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"PHP-TEST1.PHP","runlink":"PHP-TEST1.PHP","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"},{"cid":"1885","examplename":"SQL-TEST1.SQL","runlink":"SQL-TEST1.SQL","cversion":"1337"}]}',
        'query-after-test-1' => 'DELETE FROM listentries WHERE entryname="New Code" AND cid=1885;',
        'query-after-test-2' => 'DELETE FROM codeexample WHERE examplename="New Code" AND cid=1885;',
        'service' => 'http://localhost/LenaSYS/DuggaSys/microservices/sectionedService/createListEntry_ms.php',
        'service-data' => serialize(
            array( 
                'username' => 'brom',
                'password' => 'password',
                'courseid' => '1885',
                'coursename' => '1885',
                'coursevers' => '1337',
                'comment' => 'undefined',
                'opt' => 'NEW',
                'tabs' => '0',
                'lid' => 'undefined',
                'kind' => '2',
                'link' => '-1',
                'highscoremode' => '0',
                'sectname' => 'New Code',
                'visibility' => '0',
                'moment' => 'null',
                'comments' => 'undefined',
                'grptype' => 'UNK',
                'deadline' => '0:0',
                'relativedeadline' => '1:1:0:0',
                'pos' => '8',
                'hash' => 'UNK'
            )
        ),
        'filter-output' => serialize(
            array(
                'entries' => array(
                    'entryname',
                    'pos',
                    'kind',
                    'moment',
                    'visible',
                    'highscoremode',
                    'gradesys',
                    'code_id',
                    'deadline',
                    'relativedeadline',
                    'qrelease',
                    'comments',
                    'qstart',
                    'grptype',
                    'tabs',
                    'feedbackenabled',
                    'feedbackquestion',
                ),
                'debug',
                'coursename',
                'coursevers',
                'coursecode',
                'courseid',
                'codeexamples' => array(
                    'cid',
                    'examplename',
                    'runlink',
                    'cversion'
                )
            )
        ),
    ),
);

testHandler($testsData, true); // true = prettyprint (HTML), false = raw JSON
?>
