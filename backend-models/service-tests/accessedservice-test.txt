accessedservice.php

—------------------------------------------------------------------------------------------------------------------
TEST #1 - 65-68
Update firstname

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “firstname”
	$val = “test”
	$uid = VALUE FROM PREVIOUS QUERY
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using username
***

	SQL-query DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------

TEST #2 - 68-71
Update lastname

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “lastname”
	$val = “test”
	$uid = VALUE FROM PREVIOUS QUERY
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using username
***

	SQL-query DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------

TEST #3 - 71-74
Update ssn

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “ssn”
	$val = “test”
	$uid = VALUE FROM PREVIOUS QUERY
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using username
***

	SQL-query DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------

TEST #4 - 74-77
Update username

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “username”
	$val = “test”
	$uid = VALUE FROM PREVIOUS QUERY
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using username
***

	SQL-query DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------

TEST #5 - 77-80
Update class

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “class”
	$val = “test”
	$uid = VALUE FROM PREVIOUS QUERY
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using username
***

	SQL-query DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------
TEST #6 - 83-90
Update examiner

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for next query, send and for DELETE at the end of the test.

$pre-values2 = 
{
    2,
    VALUE FROM PREVIOUS QUERY,
    “test”
};

pre-query: 	INSERT INTO user_course (uid, cid, access) VALUES (pre-values2[0], pre-values2[1], pre-values2[2]);

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = ”UPDATE”
	$prop = “examiner”
	$val = “test”
	$uid = 2
    $cid = VALUE FROM PREVIOUS QUERY
}

//Redo test for val = none, where val should become NULL.
if(val == “None”) {
    send
    {
        $opt = ”UPDATE”
        $prop = “examiner”
        $val = “None”
        $uid = 2
        $cid = VALUE FROM PREVIOUS QUERY
    }
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using cid
***

SQL-query:  DELETE FROM user_course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;

—------------------------------------------------------------------------------------------------------------------

TEST #7 - 83-90
Update examiner to none

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for next query, send and for DELETE at the end of the test.

$pre-values2 = 
{
    2,
    VALUE FROM PREVIOUS QUERY,
    “test”
};

pre-query: 	INSERT INTO user_course (uid, cid, access) VALUES (pre-values2[0], pre-values2[1], pre-values2[2]);

***
*Send parameters inputs to accessedservice.php
***

send
{
    $opt = ”UPDATE”
	$prop = “examiner”
	$val = “None”
	$uid = 2
    $cid = VALUE FROM PREVIOUS QUERY
}


***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using cid
***

SQL-query:  DELETE FROM user_course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;

—------------------------------------------------------------------------------------------------------------------

TEST #8 - 90-93
Update version

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for next query, send and for DELETE at the end of the test.

$pre-values2 = 
{
    2,
    VALUE FROM PREVIOUS QUERY,
    “test”
};

pre-query: 	INSERT INTO user_course (uid, cid, access) VALUES (pre-values2[0], pre-values2[1], pre-values2[2]);

***
*Send parameters inputs to accessedservice.php
***

send
{
    $opt = ”UPDATE”
	$prop = “vers”
	$val = “test”
	$uid = 2
    $cid = VALUE FROM PREVIOUS QUERY
}


***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using cid
***

SQL-query:  DELETE FROM user_course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;

—------------------------------------------------------------------------------------------------------------------

TEST #9 - 93-96
Update access

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for next query, send and for DELETE at the end of the test.

$pre-values2 = 
{
    2,
    VALUE FROM PREVIOUS QUERY,
    “test”
};

pre-query: 	INSERT INTO user_course (uid, cid, access) VALUES (pre-values2[0], pre-values2[1], pre-values2[2]);

***
*Send parameters inputs to accessedservice.php
***

send
{
    $opt = ”UPDATE”
	$prop = “access”
	$val = “test”
	$uid = 2
    $cid = VALUE FROM PREVIOUS QUERY
}


***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using cid
***

SQL-query:	DELETE FROM user_course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;

—------------------------------------------------------------------------------------------------------------------

TEST #10 - 96-99
Update group

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for next query, send and for DELETE at the end of the test.

$pre-values2 = 
{
    2,
    VALUE FROM PREVIOUS QUERY,
    “test”
};

pre-query: 	INSERT INTO user_course (uid, cid, access) VALUES (pre-values2[0], pre-values2[1], pre-values2[2]);

***
*Send parameters inputs to accessedservice.php
***

send
{
    $opt = ”UPDATE”
	$prop = “group”
	$val = “test”
	$uid = 2
    $cid = VALUE FROM PREVIOUS QUERY
}


***
Gather service output
***
Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using cid
***

SQL-query:	DELETE FROM user_course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= SAVED VALUE FROM PREVIOUS QUERY;

—------------------------------------------------------------------------------------------------------------------
TEST #11 - 114-143
Add class

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

***
*Send parameters inputs to accessedservice.php
***
send
{
	$opt = “ADDCLASS”
	$class = “testClass”
	$responsible = 2
	$classname = “testClassName”
	$regcode = 12345678
	$classcode = “87654321”
	$hp = 7.5
	$tempo = 100
	$hpProgress = 1.5
}

***
Gather service output
***
Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using class
***

SQL-query:	DELETE FROM class WHERE class = “testClass”

—------------------------------------------------------------------------------------------------------------------
TEST #12 - 143-154
Change password

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
***

$pre-values = 
{
    “testuser1”,
    “testpwd”
};

pre-query: 	INSERT INTO user(username, password) VALUES (pre-values[0], pre-values[1]);

**
Get newly added user
**

SQL-query: 	SELECT uid FROM user WHERE username= “testuser1”;
//save this value to be used for the send.

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = “CHPWD”
	$uid = VALUE FROM PREVIOUS QUERY
	$pwd = “123123”
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using class
***

SQL-query: 	DELETE FROM user WHERE username = “testuser1”;

—------------------------------------------------------------------------------------------------------------------
TEST #13 - 154-255
Add user

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
&&
count($user) > 1
&&
$user[0]!=”PNR”
***

$pre-values =
{
	“testClass”,
	2,
	“testClassName”,
	12345678,
	“87654321”,
	7.5,
	100,
	1.5
};

pre-query: INSERT INTO class(class, responsible, classname, regcode, classcode, hp, tempo, hpProgress) VALUES (pre-values[0], pre-values[1], pre-values[2], pre-values[3], pre-values[4], pre-values[5], pre-values[6], pre-values[7])

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = “ADDUSR”
	$username = “testuser”
	$saveemail = “testmail”
	$firstname = “testfirstname”
	$lastname = “testlastname”
	$ssn = “testssn”
	$rnd = “testpassword”
	$className = “testClassName”
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB, using class
***

SQL-query:	DELETE FROM user WHERE username = “testuser”;
		    DELETE FROM class WHERE class = “testClass”;
—------------------------------------------------------------------------------------------------------------------
TEST #14 - 154-255
Add user where no class exists

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
&&
count($user) > 1
&&
rowCount() === 0
***

***
*Send parameters inputs to accessedservice.php
***

send
{
	$opt = “ADDUSR”
	$cstmt = 0
	$className = “testClass”
	$username = “testuser”
	$saveemail = “testmail”
	$firstname = “testfirstname”
	$lastname = “testlastname”
	$ssn = “testssn”
	$rnd = “testpassword”
	$className = “testClassName”
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB
***

SQL-query:	DELETE FROM user WHERE username = “testuser”;
		    DELETE FROM class WHERE class = “testClass”;

—------------------------------------------------------------------------------------------------------------------
TEST #15 - 258-278
Connect user to user_course

***
Pre-req: checkLogin() 
&& 
$hasaccess == true
&&
$uid!="UNK"
&&
$regstatus == ”Registrerad” || $regstatus == “UNK”
***

$pre-values1 = 
{
    1,
    “testtest”
};

pre-query: 	INSERT INTO course(creator, coursecode) VALUES(pre-values1[0], pre-values1[1]);

**
Get newly added course
**

SELECT cid FROM course WHERE coursecode = pre-values[1];
//save this value for send and for DELETE at the end of the test.

send
{
	$opt = “ADDUSR”
	$regstatus = “UNK”
	$uid = 2
	$cid = VALUE FROM PREVIOUS QUERY
	$coursevers = “testvers”
}

***
Gather service output
***

Save the values of the echoed array as a JSON (at the end of the file. echo json_encode($array);)
This is the expected output for the micro service.

***
* Remove inserted row from DB
***

SQL-query:	DELETE FROM user_course WHERE cid = VALUE FROM PREVIOUS QUERY;
            DELETE FROM course WHERE cid= VALUE FROM PREVIOUS QUERY;

